<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>年度时间进度条</title>
    <style>
        /* 基础样式 - 完全去除边距和间隙 */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: transparent;
            overflow: hidden;
        }
        
        /* 主容器 - 占满整个空间 */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            background: #1A1A1A;
            color: #FFFFFF;
            box-sizing: border-box;
            padding: 10px 0; /* 仅保留上下少量内边距 */
        }
        
        /* 进度条区域 - 占满宽度 */
        .progress-section {
            width: 100%;
            margin-bottom: 8px; /* 减小底部间距 */
            padding: 0 5px; /* 极小的左右内边距 */
            box-sizing: border-box;
        }
        
        /* 进度条外容器 - 带边框的圆角矩形 */
        .progress-outer {
            width: 100%;
            height: 42px; /* 增加高度 */
            background: transparent;
            border: 2px solid #CCCCCC; /* 浅灰色边框 */
            border-radius: 10px; /* 圆角矩形 */
            padding: 3px; /* 边框与进度条之间的间隔 */
            box-sizing: border-box;
        }
        
        /* 进度条容器 */
        .progress-container {
            width: 100%;
            height: 100%;
            background: #2D2D2D;
            border-radius: 8px; /* 内圆角 */
            overflow: hidden;
            position: relative;
        }
        
        /* 进度条 */
        .progress-bar {
            height: 100%;
            border-radius: 8px;
            background: #808080; /* 中灰色 */
            transition: width 0.5s ease;
            position: relative;
        }
        
        /* 进度百分比数字 */
        .progress-percentage {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #FFFFFF;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.9);
            font-size: 18px;
            padding: 0 8px;
            white-space: nowrap;
            z-index: 10; /* 确保在最上层 */
            letter-spacing: 1px; /* 增加字符间距 */
        }
        
        /* 日期信息区域 */
        .date-info {
            text-align: right;
            width: 100%;
            padding: 0 15px;
            box-sizing: border-box;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 8px;
            margin-top: 5px; /* 减小与进度条的间距 */
        }
        
        /* 分隔符样式 */
        .separator {
            color: #666666;
            font-size: 12px;
        }
        
        /* 公历日期 - 加粗突出 */
        .solar-date {
            font-size: 16px;
            font-weight: bold;
            color: #FFFFFF;
        }
        
        /* 星期和农历信息 */
        .lunar-info {
            font-size: 12px;
            color: #CCCCCC;
            display: flex;
            justify-content: flex-start;
            gap: 8px;
        }
        
        .weekday, .lunar-date {
            display: inline-block;
            font-weight: normal;
            font-size: 12px;
            color: #CCCCCC;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-section">
            <div class="progress-outer">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-percentage" id="progressPercentage"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="date-info">
            <div class="solar-date" id="currentDate"></div>
            <span class="separator">|</span>
            <div class="weekday" id="weekday"></div>
            <span class="separator">|</span>
            <div class="lunar-date" id="lunarDate"></div>
        </div>
    </div>

    <script>
        // 农历数据表 (2025-2075年)
        const lunarData = {
            // 每年的农历信息：[春节公历日期(月日), 闰月(0表示无闰月), 每月天数]
            2025: [129, 6, [30,29,30,29,30,29,29,30,29,30,29,30,29]], // 闰六月
            2026: [217, 0, [30,29,30,29,30,29,30,29,30,30,29,30]],
            2027: [206, 0, [30,29,30,29,30,29,30,29,30,29,30,30]],
            2028: [126, 5, [29,30,29,30,29,30,29,30,29,30,29,30,29]], // 闰五月
            2029: [213, 0, [30,29,30,30,29,30,29,30,29,30,29,30]],
            2030: [203, 0, [29,30,30,29,30,29,30,29,30,29,30,29]],
            2031: [123, 3, [30,29,30,29,30,30,29,30,29,30,29,30,29]], // 闰三月
            2032: [211, 0, [30,29,30,29,30,29,30,30,29,30,29,30]],
            2033: [131, 11, [29,30,29,30,29,30,29,30,30,29,30,29,30]], // 闰十一月
            2034: [219, 0, [29,30,29,30,29,30,29,30,29,30,30,29]],
            2035: [208, 0, [30,29,30,29,30,29,30,29,30,29,30,30]],
            2036: [128, 6, [29,30,29,30,29,30,30,29,30,29,30,29,30]], // 闰六月
            2037: [215, 0, [30,29,30,30,29,30,29,30,29,30,29,30]],
            2038: [204, 0, [29,30,30,29,30,29,30,29,30,29,30,29]],
            2039: [124, 5, [30,29,30,29,30,30,29,30,29,30,29,30,29]], // 闰五月
            2040: [212, 0, [30,29,30,29,30,29,30,30,29,30,29,30]],
            2041: [201, 0, [29,30,29,30,29,30,29,30,30,29,30,29]],
            2042: [122, 2, [30,29,30,29,30,29,30,29,30,29,30,30,29]], // 闰二月
            2043: [210, 0, [29,30,29,30,29,30,29,30,29,30,30,29]],
            2044: [130, 7, [30,29,30,29,30,29,30,29,30,29,30,30,29]], // 闰七月
            2045: [217, 0, [30,29,30,29,30,29,30,29,30,29,30,29]],
            2046: [206, 0, [30,30,29,30,29,30,29,30,29,30,29,30]],
            2047: [126, 5, [29,30,29,30,30,29,30,29,30,29,30,29,30]], // 闰五月
            2048: [214, 0, [29,30,29,30,29,30,30,29,30,29,30,29]],
            2049: [202, 0, [30,29,30,29,30,29,30,30,29,30,29,30]],
            2050: [123, 3, [29,30,29,30,29,30,29,30,29,30,30,29,30]], // 闰三月
            2051: [211, 0, [29,30,29,30,29,30,29,30,29,30,30,29]],
            2052: [201, 8, [30,29,30,29,30,29,30,29,30,29,30,29,30]], // 闰八月
            2053: [219, 0, [30,29,30,29,30,29,30,29,30,29,30,29]],
            2054: [208, 0, [30,29,30,30,29,30,29,30,29,30,29,30]],
            2055: [128, 6, [29,30,29,30,29,30,30,29,30,29,30,29,30]], // 闰六月
            2056: [215, 0, [30,29,30,29,30,29,30,30,29,30,29,30]],
            2057: [204, 0, [29,30,29,30,29,30,29,30,30,29,30,29]],
            2058: [124, 4, [30,29,30,29,30,29,30,29,30,29,30,30,29]], // 闰四月
            2059: [212, 0, [30,29,30,29,30,29,30,29,30,29,30,29]],
            2060: [202, 0, [30,30,29,30,29,30,29,30,29,30,29,30]],
            2061: [121, 3, [29,30,29,30,30,29,30,29,30,29,30,29,30]], // 闰三月
            2062: [209, 0, [30,29,30,29,30,30,29,30,29,30,29,30]],
            2063: [129, 7, [29,30,29,30,29,30,29,30,30,29,30,29,30]], // 闰七月
            2064: [217, 0, [30,29,30,29,30,29,30,29,30,30,29,30]],
            2065: [205, 0, [29,30,29,30,29,30,29,30,29,30,30,29]],
            2066: [125, 5, [30,29,30,29,30,29,30,29,30,29,30,29,30]], // 闰五月
            2067: [213, 0, [30,29,30,29,30,29,30,29,30,29,30,29]],
            2068: [203, 0, [30,29,30,30,29,30,29,30,29,30,29,30]],
            2069: [123, 4, [29,30,29,30,29,30,30,29,30,29,30,29,30]], // 闰四月
            2070: [211, 0, [29,30,29,30,29,30,30,29,30,29,30,29]],
            2071: [131, 8, [30,29,30,29,30,29,30,29,30,30,29,30,29]], // 闰八月
            2072: [219, 0, [30,29,30,29,30,29,30,29,30,29,30,29]],
            2073: [207, 0, [30,30,29,30,29,30,29,30,29,30,29,30]],
            2074: [127, 6, [29,30,29,30,30,29,30,29,30,29,30,29,30]], // 闰六月
            2075: [215, 0, [29,30,29,30,29,30,30,29,30,29,30,29]]
        };
        
        // 农历日期转换函数
        function getLunarDate(date) {
            const lunarMonths = [
                "正月", "二月", "三月", "四月", "五月", "六月", 
                "七月", "八月", "九月", "十月", "冬月", "腊月"
            ];
            
            const lunarDays = [
                "初一", "初二", "初三", "初四", "初五", "初六", "初七", "初八", "初九", "初十",
                "十一", "十二", "十三", "十四", "十五", "十六", "十七", "十八", "十九", "二十",
                "廿一", "廿二", "廿三", "廿四", "廿五", "廿六", "廿七", "廿八", "廿九", "三十"
            ];
            
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            // 检查年份是否在支持范围内
            if (!lunarData[year]) {
                return "农历数据不可用";
            }
            
            const yearData = lunarData[year];
            const springFestival = yearData[0]; // 春节日期(MMDD格式)
            const leapMonth = yearData[1]; // 闰月
            const monthDays = yearData[2]; // 每月天数
            
            // 解析春节日期
            const sfMonth = Math.floor(springFestival / 100);
            const sfDay = springFestival % 100;
            
            // 计算当前日期与春节的天数差
            const currentDate = new Date(year, month - 1, day);
            const springFestivalDate = new Date(year, sfMonth - 1, sfDay);
            
            let daysDiff;
            if (currentDate >= springFestivalDate) {
                // 当前日期在春节之后
                daysDiff = Math.floor((currentDate - springFestivalDate) / (1000 * 60 * 60 * 24));
            } else {
                // 当前日期在春节之前，属于上一年农历
                const prevYear = year - 1;
                if (!lunarData[prevYear]) {
                    return "农历数据不可用";
                }
                const prevYearData = lunarData[prevYear];
                const prevMonthDays = prevYearData[2];
                
                // 计算上一年农历年的总天数
                let totalDaysInPrevYear = prevMonthDays.reduce((sum, days) => sum + days, 0);
                
                // 计算从上一年春节到当前日期的天数
                const prevSF = prevYearData[0];
                const prevSFMonth = Math.floor(prevSF / 100);
                const prevSFDay = prevSF % 100;
                const prevSpringFestivalDate = new Date(prevYear, prevSFMonth - 1, prevSFDay);
                
                daysDiff = Math.floor((currentDate - prevSpringFestivalDate) / (1000 * 60 * 60 * 24));
                
                // 如果天数差大于上一年农历年总天数，说明已经进入新年
                if (daysDiff >= totalDaysInPrevYear) {
                    daysDiff = daysDiff - totalDaysInPrevYear;
                } else {
                    // 使用上一年的数据
                    return calculateLunarDateFromDays(daysDiff, prevYearData[1], prevYearData[2], lunarMonths, lunarDays);
                }
            }
            
            return calculateLunarDateFromDays(daysDiff, leapMonth, monthDays, lunarMonths, lunarDays);
        }
        
        // 根据天数差计算农历日期
        function calculateLunarDateFromDays(daysDiff, leapMonth, monthDays, lunarMonths, lunarDays) {
            if (daysDiff === 0) {
                return "正月初一"; // 春节
            }
            
            let currentMonth = 1;
            let remainingDays = daysDiff;
            
            // 遍历每个月，找到对应的农历月份和日期
            for (let i = 0; i < monthDays.length; i++) {
                if (remainingDays < monthDays[i]) {
                    // 找到了对应的月份
                    const lunarDay = remainingDays + 1;
                    
                    // 确定月份名称
                    let monthName;
                    if (leapMonth > 0 && i === leapMonth) {
                        // 当前是闰月
                        monthName = "闰" + lunarMonths[currentMonth - 1];
                    } else {
                        // 普通月份
                        monthName = lunarMonths[currentMonth - 1];
                    }
                    
                    return monthName + lunarDays[lunarDay - 1];
                }
                
                remainingDays -= monthDays[i];
                
                // 更新月份计数
                if (leapMonth > 0 && i === leapMonth) {
                    // 刚过完闰月，月份不变，下个月继续当前月份
                } else {
                    // 普通月份，递增
                    currentMonth++;
                    if (currentMonth > 12) {
                        currentMonth = 1;
                    }
                }
            }
            
            return "农历计算错误";
        }
        
        // 获取星期几的中文名称
        function getWeekdayName(date) {
            const weekdays = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
            return weekdays[date.getDay()];
        }
        
        // 计算年度进度
        function calculateYearProgress() {
            const now = new Date();
            const year = now.getFullYear();
            
            // 设置今年开始和结束的时间
            const startOfYear = new Date(year, 0, 1);
            const endOfYear = new Date(year + 1, 0, 1);
            
            // 计算总毫秒数和已过去的毫秒数
            const totalMilliseconds = endOfYear - startOfYear;
            const elapsedMilliseconds = now - startOfYear;
            
            // 计算百分比
            const progress = (elapsedMilliseconds / totalMilliseconds) * 100;
            
            return {
                year: year,
                progress: Math.min(100, Math.max(0, progress)), // 确保在0-100之间
                date: now
            };
        }
        
        // 格式化日期为 "YYYY年M月D日" 格式
        function formatDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            return `${year}年${month}月${day}日`;
        }
        
        // 更新进度显示
        function updateProgressDisplay() {
            const progressData = calculateYearProgress();
            
            // 更新日期显示 - 突出显示
            document.getElementById('currentDate').textContent = formatDate(progressData.date);
            
            // 更新星期显示 - 简化
            document.getElementById('weekday').textContent = getWeekdayName(progressData.date);
            
            // 更新农历显示 - 简化
            document.getElementById('lunarDate').textContent = getLunarDate(progressData.date);
            
            // 更新进度条和百分比
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            
            const progressValue = progressData.progress.toFixed(1); // 保留1位小数
            progressBar.style.width = `${progressValue}%`;
            progressPercentage.textContent = `${progressValue}%`;
            
            // 设置百分比数字位置
            const containerWidth = progressBar.parentElement.offsetWidth;
            const percentageWidth = progressPercentage.offsetWidth;
            const percentagePosition = (progressData.progress / 100) * containerWidth;
            
            // 确保数字不会超出进度条边界
            if (percentagePosition > containerWidth - percentageWidth - 10) {
                progressPercentage.style.left = "auto";
                progressPercentage.style.right = "5px";
            } else {
                progressPercentage.style.left = `${Math.max(5, percentagePosition - percentageWidth - 5)}px`;
                progressPercentage.style.right = "auto";
            }
        }
        
        // 初始化并设置每天刷新
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressDisplay();
            
            // 设置每天刷新一次（24小时）
            setInterval(updateProgressDisplay, 24 * 60 * 60 * 1000);
            
            // 添加窗口大小变化监听，确保百分比位置正确
            window.addEventListener('resize', updateProgressDisplay);
        });
    </script>
</body>
</html>

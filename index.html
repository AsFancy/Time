<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>年度时间进度条</title>
    <style>
        /* 基础样式 - 移除所有边距和间隙 */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: transparent;
            overflow: hidden;
        }
        
        /* 主容器 */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            background: #1A1A1A; /* 更深的背景色 */
            color: #FFFFFF;
            box-sizing: border-box;
            padding: 0;
            margin: 0;
        }
        
        /* 进度条区域 */
        .progress-section {
            width: 85%;
            margin-bottom: 15px;
        }
        
        .progress-container {
            width: 100%;
            height: 30px;
            background: #2D2D2D;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .progress-bar {
            height: 100%;
            border-radius: 15px;
            background: linear-gradient(90deg, 
                #0d3b66, /* 深蓝色 */
                #1a936f, /* 深绿色 */
                #9e2a2b  /* 深红色 */
            );
            transition: width 0.5s ease;
            position: relative;
        }
        
        .progress-percentage {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #FFFFFF;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.7);
            font-size: 14px;
            padding: 0 8px;
            white-space: nowrap;
        }
        
        /* 日期显示区域 */
        .date-display {
            text-align: center;
            font-size: 16px;
            color: #A0A0A0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-section">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-percentage" id="progressPercentage"></div>
                </div>
            </div>
        </div>
        
        <div class="date-display" id="currentDate"></div>
    </div>

    <script>
        // 计算年度进度
        function calculateYearProgress() {
            const now = new Date();
            const year = now.getFullYear();
            
            // 设置今年开始和结束的时间
            const startOfYear = new Date(year, 0, 1);
            const endOfYear = new Date(year + 1, 0, 1);
            
            // 计算总毫秒数和已过去的毫秒数
            const totalMilliseconds = endOfYear - startOfYear;
            const elapsedMilliseconds = now - startOfYear;
            
            // 计算百分比
            const progress = (elapsedMilliseconds / totalMilliseconds) * 100;
            
            return {
                year: year,
                progress: Math.min(100, Math.max(0, progress)), // 确保在0-100之间
                date: now
            };
        }
        
        // 格式化日期为 "YYYY年M月D日" 格式
        function formatDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            return `${year}年${month}月${day}日`;
        }
        
        // 更新进度显示
        function updateProgressDisplay() {
            const progressData = calculateYearProgress();
            
            // 更新日期显示
            document.getElementById('currentDate').textContent = formatDate(progressData.date);
            
            // 更新进度条和百分比
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            
            const progressValue = progressData.progress.toFixed(1); // 保留1位小数
            progressBar.style.width = `${progressValue}%`;
            progressPercentage.textContent = `${progressValue}%`;
            
            // 设置百分比数字位置
            const containerWidth = progressBar.parentElement.offsetWidth;
            const percentageWidth = progressPercentage.offsetWidth;
            const percentagePosition = (progressData.progress / 100) * containerWidth;
            
            // 确保数字不会超出进度条边界
            if (percentagePosition > containerWidth - percentageWidth - 10) {
                progressPercentage.style.left = "auto";
                progressPercentage.style.right = "5px";
            } else {
                progressPercentage.style.left = `${percentagePosition + 5}px`;
                progressPercentage.style.right = "auto";
            }
        }
        
        // 初始化并设置每天刷新
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressDisplay();
            
            // 设置每天刷新一次（24小时）
            setInterval(updateProgressDisplay, 24 * 60 * 60 * 1000);
            
            // 添加窗口大小变化监听，确保百分比位置正确
            window.addEventListener('resize', updateProgressDisplay);
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>年度时间进度条</title>
    <style>
        /* 基础样式 - 完全去除边距和间隙 */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background: transparent;
            overflow: hidden;
        }
        
        /* 主容器 - 占满整个空间 */
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            background: #1A1A1A;
            color: #FFFFFF;
            box-sizing: border-box;
            padding: 10px 0; /* 仅保留上下少量内边距 */
        }
        
        /* 进度条区域 - 占满宽度 */
        .progress-section {
            width: 100%;
            margin-bottom: 8px; /* 减小底部间距 */
            padding: 0 5px; /* 极小的左右内边距 */
            box-sizing: border-box;
        }
        
        /* 进度条外容器 - 带边框的圆角矩形 */
        .progress-outer {
            width: 100%;
            height: 42px; /* 增加高度 */
            background: transparent;
            border: 2px solid #CCCCCC; /* 浅灰色边框 */
            border-radius: 10px; /* 圆角矩形 */
            padding: 3px; /* 边框与进度条之间的间隔 */
            box-sizing: border-box;
        }
        
        /* 进度条容器 */
        .progress-container {
            width: 100%;
            height: 100%;
            background: #2D2D2D;
            border-radius: 8px; /* 内圆角 */
            overflow: hidden;
            position: relative;
        }
        
        /* 进度条 */
        .progress-bar {
            height: 100%;
            border-radius: 8px;
            background: #808080; /* 中灰色 */
            transition: width 0.5s ease;
            position: relative;
        }
        
        /* 进度百分比数字 */
        .progress-percentage {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #FFFFFF;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.9);
            font-size: 18px;
            padding: 0 8px;
            white-space: nowrap;
            z-index: 10; /* 确保在最上层 */
            letter-spacing: 1px; /* 增加字符间距 */
        }
        
        /* 日期信息区域 */
        .date-info {
            text-align: right;
            width: 100%;
            padding: 0 15px;
            box-sizing: border-box;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 8px;
            margin-top: 5px; /* 减小与进度条的间距 */
        }
        
        /* 分隔符样式 */
        .separator {
            color: #666666;
            font-size: 12px;
        }
        
        /* 公历日期 - 加粗突出 */
        .solar-date {
            font-size: 16px;
            font-weight: bold;
            color: #FFFFFF;
        }
        
        /* 星期和农历信息 */
        .lunar-info {
            font-size: 12px;
            color: #CCCCCC;
            display: flex;
            justify-content: flex-start;
            gap: 8px;
        }
        
        .weekday, .lunar-date {
            display: inline-block;
            font-weight: normal;
            font-size: 12px;
            color: #CCCCCC;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-section">
            <div class="progress-outer">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-percentage" id="progressPercentage"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="date-info">
            <div class="solar-date" id="currentDate"></div>
            <span class="separator">|</span>
            <div class="weekday" id="weekday"></div>
            <span class="separator">|</span>
            <div class="lunar-date" id="lunarDate"></div>
        </div>
    </div>

    <script>
        // 农历日期转换函数
        function getLunarDate(date) {
            // 简化版的农历日期计算
            // 注意：这是一个简化版本，实际农历计算非常复杂
            // 这里使用一个近似算法，仅用于演示
            
            const lunarMonths = [
                "正月", "二月", "三月", "四月", "五月", "六月", 
                "七月", "八月", "九月", "十月", "冬月", "腊月"
            ];
            
            const lunarDays = [
                "初一", "初二", "初三", "初四", "初五", "初六", "初七", "初八", "初九", "初十",
                "十一", "十二", "十三", "十四", "十五", "十六", "十七", "十八", "十九", "二十",
                "廿一", "廿二", "廿三", "廿四", "廿五", "廿六", "廿七", "廿八", "廿九", "三十"
            ];
            
            // 简单模拟农历日期（实际应用中应使用专业农历计算库）
            // 这里使用一个简单的算法，仅用于演示
            const startDate = new Date(date.getFullYear(), 0, 1);
            const diffTime = date - startDate;
            const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            const monthIndex = Math.floor(diffDays / 30) % 12;
            const dayIndex = diffDays % 30;
            
            return lunarMonths[monthIndex] + lunarDays[dayIndex];
        }
        
        // 获取星期几的中文名称
        function getWeekdayName(date) {
            const weekdays = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
            return weekdays[date.getDay()];
        }
        
        // 计算年度进度
        function calculateYearProgress() {
            const now = new Date();
            const year = now.getFullYear();
            
            // 设置今年开始和结束的时间
            const startOfYear = new Date(year, 0, 1);
            const endOfYear = new Date(year + 1, 0, 1);
            
            // 计算总毫秒数和已过去的毫秒数
            const totalMilliseconds = endOfYear - startOfYear;
            const elapsedMilliseconds = now - startOfYear;
            
            // 计算百分比
            const progress = (elapsedMilliseconds / totalMilliseconds) * 100;
            
            return {
                year: year,
                progress: Math.min(100, Math.max(0, progress)), // 确保在0-100之间
                date: now
            };
        }
        
        // 格式化日期为 "YYYY年M月D日" 格式
        function formatDate(date) {
            const year = date.getFullYear();
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            return `${year}年${month}月${day}日`;
        }
        
        // 更新进度显示
        function updateProgressDisplay() {
            const progressData = calculateYearProgress();
            
            // 更新日期显示 - 突出显示
            document.getElementById('currentDate').textContent = formatDate(progressData.date);
            
            // 更新星期显示 - 简化
            document.getElementById('weekday').textContent = getWeekdayName(progressData.date);
            
            // 更新农历显示 - 简化
            document.getElementById('lunarDate').textContent = getLunarDate(progressData.date);
            
            // 更新进度条和百分比
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            
            const progressValue = progressData.progress.toFixed(1); // 保留1位小数
            progressBar.style.width = `${progressValue}%`;
            progressPercentage.textContent = `${progressValue}%`;
            
            // 设置百分比数字位置
            const containerWidth = progressBar.parentElement.offsetWidth;
            const percentageWidth = progressPercentage.offsetWidth;
            const percentagePosition = (progressData.progress / 100) * containerWidth;
            
            // 确保数字不会超出进度条边界
            if (percentagePosition > containerWidth - percentageWidth - 10) {
                progressPercentage.style.left = "auto";
                progressPercentage.style.right = "5px";
            } else {
                progressPercentage.style.left = `${Math.max(5, percentagePosition - percentageWidth - 5)}px`;
                progressPercentage.style.right = "auto";
            }
        }
        
        // 初始化并设置每天刷新
        document.addEventListener('DOMContentLoaded', function() {
            updateProgressDisplay();
            
            // 设置每天刷新一次（24小时）
            setInterval(updateProgressDisplay, 24 * 60 * 60 * 1000);
            
            // 添加窗口大小变化监听，确保百分比位置正确
            window.addEventListener('resize', updateProgressDisplay);
        });
    </script>
</body>
</html>
